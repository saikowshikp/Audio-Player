<!DOCTYPE html>
<html>
<head>
    <title>Song Player</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <h1>Audio Player</h1>
    
    <audio id="audioPlayer" controls>
        <source src="" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div class="song-info">
        <p>Currently Playing: <span id="currentSong">No song selected</span></p>
    </div>

    <div class="controls">
        <button onclick="playPrevious()">Previous</button>
        <button onclick="playNext()">Next</button>
        <button onclick="shuffleSongs()">Shuffle</button>
    </div>

    <div class="songs">
        {% for song in songs %}
            <button onclick="playSong('{{ song }}')" id="{{ song.replace('.mp3', '') }}">{{ song }}</button>
        {% endfor %}
    </div>



<!-- Rest of your HTML -->
<!-- ... -->


    <script>
        var currentSong = 0;
        var audio = document.getElementById('audioPlayer');
        var songsList = [
            {% for song in songs %}
            '{{ song }}',
            {% endfor %}
        ];

        audio.addEventListener('ended', function() {
            playNext();
        });

        function playSong(song) {
            var index = songsList.indexOf(song);
            audio.src = "static/music/" + song;
            audio.play();
            currentSong = index;
            document.getElementById('currentSong').innerText = song;

            // Remove highlight from previously highlighted button
            var buttons = document.getElementsByClassName("songs")[0].getElementsByTagName("button");
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove("highlight");
            }

            // Highlight the currently playing song's button
            document.getElementById(song.replace('.mp3', '')).classList.add("highlight");
        }

        function playNext() {
            currentSong = (currentSong + 1) % songsList.length;
            var nextSong = songsList[currentSong];
            audio.src = "static/music/" + nextSong;
            audio.play();
            document.getElementById('currentSong').innerText = nextSong;

            // Remove highlight from previously highlighted button
            var buttons = document.getElementsByClassName("songs")[0].getElementsByTagName("button");
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove("highlight");
            }

            // Highlight the currently playing song's button
            document.getElementById(nextSong.replace('.mp3', '')).classList.add("highlight");
        }

        function playPrevious() {
            currentSong = (currentSong - 1 + songsList.length) % songsList.length;
            var prevSong = songsList[currentSong];
            audio.src = "static/music/" + prevSong;
            audio.play();
            document.getElementById('currentSong').innerText = prevSong;

            // Remove highlight from previously highlighted button
            var buttons = document.getElementsByClassName("songs")[0].getElementsByTagName("button");
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove("highlight");
            }

            // Highlight the currently playing song's button
            document.getElementById(prevSong.replace('.mp3', '')).classList.add("highlight");
        }

        function shuffleSongs() {
            var currentIndex = songsList.length, temporaryValue, randomIndex;

            while (0 !== currentIndex) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex -= 1;

                temporaryValue = songsList[currentIndex];
                songsList[currentIndex] = songsList[randomIndex];
                songsList[randomIndex] = temporaryValue;
            }

            audio.src = "static/music/" + songsList[currentSong];
            audio.play();
            document.getElementById('currentSong').innerText = songsList[currentSong];

            // Remove highlight from previously highlighted button
            var buttons = document.getElementsByClassName("songs")[0].getElementsByTagName("button");
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove("highlight");
            }

            // Highlight the currently playing song's button
            document.getElementById(songsList[currentSong].replace('.mp3', '')).classList.add("highlight");
        }
    </script>
</body>
</html>